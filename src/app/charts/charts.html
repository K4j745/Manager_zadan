<div class="statistics-container">
  <!-- Header with summary stats -->
  <mat-card class="stats-header" [@slideInUp]>
    <mat-card-header>
      <mat-card-title>Statystyki Nauki</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <div class="quick-stats">
        <mat-card class="stat-card" *ngFor="let stat of quickStats">
          <mat-card-content>
            <div class="stat-value">{{ stat.value }}</div>
            <div class="stat-label">{{ stat.label }}</div>
          </mat-card-content>
        </mat-card>
      </div>
    </mat-card-content>

    <mat-card-actions>
      <button
        mat-raised-button
        color="primary"
        class="refresh-btn"
        (click)="refreshData()"
      >
        <mat-icon>refresh</mat-icon>
        Odśwież dane
      </button>
    </mat-card-actions>
  </mat-card>

  <!-- Charts grid -->
  <div class="charts-grid">
    <!-- Bar chart -->
    <mat-card class="chart-container" [@slideInUp]>
      <mat-card-header>
        <mat-card-title>Aktywność w ostatnich 15 dniach</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="chart-wrapper">
          <canvas
            baseChart
            [type]="'bar'"
            [data]="barChartData"
            [options]="barChartOptions"
          ></canvas>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Line chart -->
    <mat-card class="chart-container" [@slideInUp]>
      <mat-card-header>
        <mat-card-title>Czas nauki dziennie</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="chart-wrapper">
          <canvas
            baseChart
            [type]="'line'"
            [data]="lineChartData"
            [options]="lineChartOptions"
          ></canvas>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Pie chart -->
    <mat-card class="chart-container" [@slideInUp]>
      <mat-card-header>
        <mat-card-title>Rozkład aktywności</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="chart-wrapper">
          <canvas
            baseChart
            [type]="'pie'"
            [data]="pieChartData"
            [options]="pieChartOptions"
          ></canvas>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Live chart -->
    <mat-card class="chart-container" [@slideInUp]>
      <mat-card-header>
        <mat-card-title>Aktywność na żywo</mat-card-title>
        <!-- <mat-chip-list>
          <mat-chip color="warn" selected>
            <mat-icon class="live-icon">fiber_manual_record</mat-icon>
            LIVE
          </mat-chip>
        </mat-chip-list> -->
      </mat-card-header>
      <mat-card-content>
        <div class="chart-wrapper">
          <canvas
            baseChart
            [type]="'line'"
            [data]="liveChartData"
            [options]="liveChartOptions"
          ></canvas>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Additional stats -->
  <mat-card class="additional-stats" [@slideInUp]>
    <mat-card-header>
      <mat-card-title>Analiza trendu</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="trend-cards">
        <mat-card class="trend-card positive">
          <mat-card-content>
            <div class="trend-icon">
              <mat-icon>trending_up</mat-icon>
            </div>
            <div class="trend-info">
              <span class="trend-value">+15%</span>
              <span class="trend-label">Wzrost aktywności</span>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="trend-card neutral">
          <mat-card-content>
            <div class="trend-icon">
              <mat-icon>trending_flat</mat-icon>
            </div>
            <div class="trend-info">
              <span class="trend-value">{{ getDailyAverage() }} min</span>
              <span class="trend-label">Średnia dzienna</span>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="trend-card positive">
          <mat-card-content>
            <div class="trend-icon">
              <mat-icon>check_circle</mat-icon>
            </div>
            <div class="trend-info">
              <span class="trend-value">85%</span>
              <span class="trend-label">Cel osiągnięty</span>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </mat-card-content>
  </mat-card>
</div>
